<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <mat-stepper #stepper class="formgeneral">
        <mat-step [stepControl]="firstFormGroup">
          <form [formGroup]="firstFormGroup">
            <ng-template matStepLabel>Creación de usuario</ng-template>
            <br />
            <mat-form-field class="example-full-width">
              <mat-label>Nombre de Usuario</mat-label>
              <input
                matInput
                placeholder="nombreUsuario"
                formControlName="nombreUsuario"
              />
              <mat-error *ngIf="obtenerControlCampo('nombreUsuario')?.hasError('minlength')">
                El nombre de usuario debe tener al menos 5 caracteres.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo('nombreUsuario')?.hasError('maxlength')">
                El nombre de usuario no puede tener más de 30 caracteres.
              </mat-error>
              
            </mat-form-field>

            <br />
            <mat-form-field class="example-full-width">
              <mat-label>Clave</mat-label>
              <input matInput placeholder="clave" formControlName="clave" type="password"/>
              <mat-error
                *ngIf="obtenerControlCampo('clave')?.errors?.['required']"
              >
                La clave es obligatoria.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo('clave')?.hasError('minlength')">
                La clave debe tener al menos 5 caracteres.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo('clave')?.hasError('maxlength')">
                La clave no puede tener más de 200 caracteres.
              </mat-error>
            </mat-form-field>
            <br />

            <mat-form-field class="example-full-width">
              <mat-label>Rol</mat-label>
              <mat-select formControlName="rol">
                <mat-option
                  *ngFor="let p of listaRolUsuarios"
                  [value]="p.idRolUsuario"
                >
                  {{ p.rol }}
                </mat-option>
              </mat-select>
              <mat-error
                *ngIf="obtenerControlCampo('rol')?.errors?.['required']"
              >
                El rol es obligatorio.
              </mat-error>
            </mat-form-field>
            <div>
              <button mat-button matStepperNext>Siguiente</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="secondFormGroup" label="Datos del usuario">
          <form [formGroup]="secondFormGroup">
            <br />

            <mat-form-field class="example-full-width">
              <mat-label>Nombres</mat-label>
              <input matInput placeholder="nombres" formControlName="nombres" />
              <mat-error
                *ngIf="obtenerControlCampo2('nombres')?.errors?.['required']"
              >
                El nombre es obligatorio.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('nombres')?.hasError('minlength')">
                El nombre debe tener al menos 4 caracteres.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('nombres')?.hasError('maxlength')">
                El nombre no puede tener más de 100 caracteres.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('nombres')?.hasError('pattern')">
                Solo se permiten letras en los nombres.
              </mat-error>
            </mat-form-field>
            <br />
            <mat-form-field class="example-full-width">
              <mat-label>Apellidos</mat-label>
              <input
                matInput
                placeholder="apellidos"
                formControlName="apellidos"
              />
              <mat-error
                *ngIf="obtenerControlCampo2('apellidos')?.errors?.['required']"
              >
                El apellido es obligatorio.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('apellidos')?.hasError('minlength')">
                Los apellidos debe tener al menos 4 caracteres.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('apellidos')?.hasError('maxlength')">
                Los apellidos no puede tener más de 100 caracteres.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('apellidos')?.hasError('pattern')">
                Solo se permiten letras en los apellidos.
              </mat-error>
            </mat-form-field>
            <br />
            <mat-form-field class="example-full-width">
              <mat-label>Correo</mat-label>
              <input matInput placeholder="correo" formControlName="correo" />
              <mat-error
                *ngIf="obtenerControlCampo2('correo')?.errors?.['required']"
              >
                El correo es obligatorio.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('correo')?.hasError('minlength')">
                El correo debe tener al menos 4 caracteres.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo2('correo')?.hasError('maxlength')">
                El correo no puede tener más de 100 caracteres.
              </mat-error>
            </mat-form-field>

            <div>
              <button mat-button matStepperPrevious>Atrás</button>
              <button mat-button matStepperNext>Siguiente</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="thirdFormGroup">
          <form [formGroup]="thirdFormGroup">
            <ng-template matStepLabel>Datos adicionales</ng-template>
            <mat-form-field class="example-full-width">
              <mat-label>Edad</mat-label>
              <input matInput placeholder="edad" formControlName="edad" />
              <mat-error
                *ngIf="obtenerControlCampo3('edad')?.errors?.['required']"
              >
                La edad es obligatoria.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo3('edad')?.hasError('pattern')">
                Solo se permiten números.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo3('edad')?.hasError('min')">
                La edad mínima es de 18 años.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo3('edad')?.hasError('max')">
                La edad máxima es de 100 años.
              </mat-error>
            </mat-form-field>
            <br />
            <mat-form-field class="example-full-width">
              <mat-label>Teléfono</mat-label>
              <input
                matInput
                placeholder="telefono"
                formControlName="telefono"
              />
              <mat-error
                *ngIf="obtenerControlCampo3('telefono')?.errors?.['required']"
              >
                El telefono es obligatorio.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo3('telefono')?.hasError('pattern')">
                Solo se permiten números.
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo3('telefono')?.hasError('minlength')">
                El número debe tener 9 dígitos
              </mat-error>
              <mat-error *ngIf="obtenerControlCampo3('telefono')?.hasError('maxlength')">
                El número debe tener 9 dígitos
              </mat-error>
            </mat-form-field>
            <br />

            <mat-form-field class="example-full-width">
              <mat-label>Género</mat-label>
              <mat-select formControlName="genero">
                <mat-option *ngFor="let p of tipos" [value]="p.value">
                  {{ p.viewValue }}
                </mat-option>
              </mat-select>
              <mat-error
                *ngIf="obtenerControlCampo3('genero')?.errors?.['required']"
              >
                El genero es obligatorio.
              </mat-error>
            </mat-form-field>
            <div>
              <button mat-button routerLink="/login">Cancelar registro</button>
              <button mat-button class="btn" (click)="aceptar()">Registrarse</button>
            </div>
            <p>{{ mensaje }}</p>
          </form>
        </mat-step>
      </mat-stepper>
    </div>
  </body>
</html>
